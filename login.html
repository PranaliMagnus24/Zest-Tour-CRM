<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Zest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover">
    <link href="assets/zestlogo.png" rel="icon">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="bg-white">
    <div style="width: 100%;display: flex;flex-direction: column; justify-content: center;align-items: center;" class="imgd">
        <div class="section mt-0 text-center">
            <img src="assets/zestlogo.png" width="100px">
        </div>
        <div class="col-12">
            <div class="section pt-0 pb-0 col-lg-6 col-md-6 text-left pull-left" style="padding:70px;">                    
                <div class="col-lg-12 p-0 text-left">
                    <div class="form-check mt-2 pull-left" style="width:100%;">
                        <input class="form-check-input" checked="" type="radio" name="type" value="http://localhost/zest-tour-crm/" data-url="api/login.php" data-req="1" id="holiday">
                        <label class="form-check-label" for="holiday">
                            Holiday CRM
                        </label>
                    </div>
                    <div class="form-check mt-2 pull-left" style="width:100%;">
                        <input class="form-check-input" type="radio" name="type" value="http://localhost/zest-tour-crm/visa/" data-url="api/index.php/User/login" data-req="1" id="visa">
                        <label class="form-check-label" for="visa">
                            Visa CRM
                        </label>
                    </div>
                    <div class="form-check d-none mt-2 pull-left" style="width:100%;">
                        <input class="form-check-input" type="radio" name="type" value="https://kyc.zestonline.in/" data-url="USER/login" id="kyc" data-req="">
                        <label class="form-check-label" for="kyc">
                            KYC Form
                        </label>
                    </div>
                    <div class="form-check mt-2 pull-left" style="width:100%;">
                        <input class="form-check-input" type="radio" name="type" value="https://travelreport.zesttourcrm.in/" data-url="api/login.php" id="travelreport" data-req="4">
                        <label class="form-check-label" for="travelreport">
                            Travel Report
                        </label>
                    </div>    
                    <div class="form-check mt-2 pull-left" style="width:100%;">
                        <input class="form-check-input" type="radio" name="type" value="http://localhost/zest-tour-crm/lead/" data-url="api/index.php/User/login"" id="contact" data-req="">
                        <label class="form-check-label" for="contact">
                            Lead Management(Contact form)
                        </label>
                    </div>    
                </div>
                <div class=" pull-left w-100 mt-2" id="login_class">
                    <div class="card shadow-none">
                        <div class="card-body pb-1">
                            <div class="form-group basic position-relative">
                                <div class="input-wrapper">
                                    <label class="label" for="email1">E-mail</label>
                                    <input type="email" class="form-control login-ui" name="email" autocomplete="off" placeholder="Your e-mail" data-required="yes" data-validation-required-message="This field is required">
                                    <i class="clear-input">
                                        <ion-icon name="close-circle"></ion-icon>
                                    </i>
                                </div>
                            </div>

                            <div class="form-group basic position-relative">
                                <div class="input-wrapper">
                                    <label class="label" for="password1">Password</label>
                                    <input type="password" class="form-control login-ui" name="password" autocomplete="off" placeholder="Your password" data-required="yes" data-validation-required-message="This field is required">
                                    <i class="clear-input">
                                        <ion-icon name="close-circle"></ion-icon>
                                    </i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-links pe-2 ps-2 mt-2">
                        <div><a href="forgot_password.html" class="text-muted">Forgot Password?</a></div>
                    </div>
                    <div class="mt-3 pe-2 ps-2 me-auto ms-auto transparent">
                        <button type="button" class="btn btn-primary btn-block btn-lg" onclick="validate('#login_class','login')" style="background: #0071cd !important;border-color: #0071cd !important;" onclick="validate('#login','login')"><svg class="checkmark hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg> Log in</button>
                    </div>
                </div>

            </div>
            <div class="section p-0 col-lg-6 col-md-6 text-center pull-left">            
                <img src="assets/Group-4.png" style="width: 70%;">
            </div>
        </div>
    </div>
        <script src="assets/js/lib/jquery-3.4.1.min.js"></script>
        <!-- Bootstrap-->
        <script src="assets/js/lib/popper.min.js"></script>
        <script src="assets/js/lib/bootstrap.bundle.min.js"></script>

        <!-- Ionicons -->
        <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
        <!-- Splide -->
        <script src="assets/js/plugins/owl-carousel/owl.carousel.min.js"></script>
        <!-- Base Js File -->
        <script src="assets/js/base.js"></script>


</body>

</html>
<script type="text/javascript">
    function check_type()
    {
        user_type_enquiry=$('input[type=radio][name=type]:checked').val();
        if(user_type_enquiry=='international')
        {
            $('.type_customer').removeClass('d-none')
        }
        else
        {
            $('.type_customer').addClass('d-none')
        }
    }
    $('.imgd').height($(window).height()-1)
    function login() {
        baseurl = $('input[type=radio][name=type]:checked').val();
        url=$('input[type=radio][name=type]:checked').attr('data-url')
        req=$('input[type=radio][name=type]:checked').attr('data-req')
        console.log(baseurl+url+'?'+decodeURIComponent($("#login_class").find('select, textarea, input').serialize()) + '&req='+req)
        $.ajax({
            type: "get",
            url: baseurl+url,
            data: decodeURIComponent($("#login_class").find('select, textarea, input').serialize()) + '&req='+req,
            success: function(html) 
            {
                htmls=html
                html=JSON.parse(html)
                console.log(html)
                if (html['success'] == true) {
                    if(baseurl=='https://travelreport.zesttourcrm.in/')
                    {
                        window.location.replace("https://travelreport.zesttourcrm.in/login.html?data="+htmls);
                        // window.location.replace("https://zesttourcrm.in/redirect_login.html?data="+htmls);
                    }
                    else
                    {
                        localStorage.setItem("user_id_enquiry", html['data']['id']);
                        localStorage.setItem("user_email_enquiry", html['data']['email']);
                        localStorage.setItem("user_name_enquiry", html['data']['name']);
                        localStorage.setItem("user_type_customer_enquiry", html['data']['type_customer']);
                        localStorage.setItem("user_designation", html['data']['designation']);
                        localStorage.setItem("user_type_enquiry", html['data']['type']);
                        if(baseurl=='http://localhost/zest-tour-crm/')
                        {
                            window.location.replace("http://localhost/zest-tour-crm/redirect_login.html?data="+htmls);
                            // window.location.replace("https://travelreport.zesttourcrm.in/login.html?data="+htmls);
                        }   
                        else
                        {
                            alert('Other base')
                            window.location.replace(baseurl+"login.html?data="+htmls);
                        }
                    }
                } else {
                    show_toast(html['data'], "danger", 'big', "center", "inverse");
                }
            },
        });
    }


    function show_toast(message, type, not_type, pos = 'top', bg = 'inverse') {
        var random = Math.floor(Math.random() * 10);
        if (type == 'danger') {
            $text_type = 'name="close-circle-outline" class="text-danger"'

        } else {
            $text_type = 'name="checkmark-circle" class="text-success"';
        }
        if (not_type == 'big') {
            $('body').append('<div id="toast' + random + '" class="toast-box bg-' + bg + ' text-center toast-' + pos + ' show"><div class="in"><ion-icon ' + $text_type + '></ion-icon><div class="text">' + message + '</div></div></div>')
        } else {
            $('body').append('<div id="toast' + random + '" class="toast-box bg-' + bg + ' text-center toast-' + pos + ' show"><div class="in w-100 p-0"><div class="text">' + message + '</div></div></div>')
        }
        setTimeout(() => {
            $('#toast' + random).removeClass('show');
            $('#toast' + random).remove();
        }, 3000);
        setTimeout(() => {
            $('#toast' + random).remove();
        }, 3500);
    }
</script>